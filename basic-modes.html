<!--
Shows a single child element at a time.

@element basic-modes
-->

<link rel="import" href="../polymer-selector/polymer-selector.html">

<polymer-element name="basic-modes" extends="polymer-selector" constructor="basicModes">
<template>
  <style>
  :host {
    display: block;
  }

  ::content :not(.polymer-selected) {
    display: none;
  }
  </style>
  <shadow></shadow>
</template>

<script>
Polymer( "basic-modes", {

  attached: function() {
    // By default, the first mode is selected.
    if ( !this.selected ) {
      this.selected = 0;
    }
  },

  /**
   * True if it there is at least one child after the active one.
   *
   * @property canGoNext
   */
  get canGoNext() {
    return ( this.children && this.selectedIndex + 1 < this.children.length );
  },

  /**
   * True if it there is at least one child after the active one.
   *
   * @property canGoPrevious
   */
  get canGoPrevious() {
    return ( this.children && this.selectedIndex > 0 );
  },

  /**
   * Move to the next child in the sequence of children.
   * If the last child is already the active one being shown, this has no effect.
   *
   * @method next
   */
  next: function() {
    if ( this.canGoNext ) {
      this.selected = this.selectedIndex + 1;
    }

    var oldCount = this._count;
    this._count++;
    var notifier = Object.getNotifier( this );
    notifier.notify({
      type: "update",
      name: "count",
      oldValue: oldCount
    });
    // this.setAttribute( "count", this._count );
    console.log( this.count );
  },

  /**
   * Move to the previous child in the sequence of children.
   * If the first child is already the active one being shown, this has no effect.
   *
   * @method previous
   */
  previous: function() {
    if ( this.canGoPrevious ) {
      this.selected = this.selectedIndex - 1;
    }
  },

  ready: function() {
    this.super();
    this.notap = true;

    if ( !Object.getOwnPropertyDescriptor( basicModes.prototype, "count" ) ) {
      Object.defineProperty( basicModes.prototype, "count", {
        get: function() {
          return this._count;
        }
      });      
    }

  },

  _count: 0

});
</script>

</polymer-element>
